<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ChoreSpin</title>
  <link rel="manifest" href="./manifest.webmanifest">
  <meta name="theme-color" content="#111111" />
  <style>
    :root { --bg:#0f1115; --fg:#e7e7e7; --muted:#8b8b8b; --card:#151823; --brand:#6ee7b7; }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--fg);font-family:system-ui,Segoe UI,Roboto,sans-serif}
    .wrap{min-height:100dvh;display:flex;align-items:center;justify-content:center;padding:16px}
    .card{width:min(720px,100%);background:var(--card);border:1px solid #23263a;border-radius:16px;padding:16px;box-shadow:0 6px 24px rgba(0,0,0,.25)}
    h1{margin:0 0 10px;font-size:24px}
    .row{display:flex;gap:8px;flex-wrap:wrap;margin:8px 0}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:8px}
    @media (max-width:520px){ .grid{grid-template-columns:1fr} }
    select,input,button{font:inherit;padding:10px 12px;border-radius:12px;border:1px solid #2a2e42;background:#1a1e2e;color:#fff}
    input{width:100%}
    button{cursor:pointer}
    .pill{padding:8px 10px;border-radius:999px;background:#1a1e2e;border:1px solid #2a2e42;color:#ddd}
    .muted{color:var(--muted)}
    .big{font-size:18px}
    .success{color:var(--brand)}
    .timer{font-variant-numeric:tabular-nums;font-size:28px;margin-top:6px}
    .wheel{min-height:48px;display:flex;align-items:center;gap:8px;overflow:auto;padding:6px;border:1px dashed #2a2e42;border-radius:12px;background:#101321}
    .slice{padding:6px 10px;border-radius:10px;background:#232846;color:#d6d6ff;white-space:nowrap}
    .hr{height:1px;background:#23263a;margin:12px 0}
    a{color:#6ee7b7}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>ChoreSpin <span class="muted">Â· MVP</span></h1>

      <!-- Auth -->
      <div id="authRow" class="row muted">Checking sessionâ€¦</div>

      <div id="loginPanel" style="display:none">
        <div class="grid">
          <input id="email" type="email" placeholder="Email" autocomplete="email">
          <input id="password" type="password" placeholder="Password">
        </div>
        <div class="row">
          <button id="btnSignin">Sign in</button>
          <button id="btnSignup">Create account</button>
          <a href="./accept.html" class="muted" style="align-self:center">Use an invite link</a>
        </div>
        <div class="muted" style="font-size:12px">Tip: parents can use email tags like <code>you+child@yourmail.com</code></div>
      </div>

      <div id="logoutRow" class="row" style="display:none">
        <button id="btnLogout">Log out</button>
      </div>

      <!-- Member + refresh -->
      <div id="memberRow" class="row" style="display:none">
        <label>Member:&nbsp;
          <select id="memberSelect"></select>
        </label>
        <button id="refresh">â†» Refresh</button>
      </div>

      <!-- Add chore (parent only) -->
      <div id="addChore" class="row" style="display:none;flex-direction:column">
        <div class="muted">Add a chore (parent only)</div>
        <div class="row" style="gap:6px;flex-wrap:wrap">
          <input id="chTitle" placeholder="Title" />
          <input id="chMinutes" type="number" min="1" max="180" placeholder="Minutes" style="width:120px" />
          <input id="chPoints" type="number" min="1" placeholder="Points" style="width:120px" />
          <select id="chAudience">
            <option value="kids">kids</option>
            <option value="adults">adults</option>
            <option value="any">any</option>
          </select>
          <button id="btnAddChore">Add</button>
        </div>
      </div>

      <!-- Eligible + wheel -->
      <div id="eligible" class="row" style="display:none;flex-direction:column">
        <div class="muted">Eligible chores for <b id="who"></b>:</div>
        <div class="wheel" id="wheel"></div>
      </div>

      <!-- Spin -->
      <div id="spinRow" class="row" style="display:none">
        <button id="spin" class="big">ðŸŽ¡ Spin</button>
        <span id="result" class="pill" style="display:none"></span>
        <button id="start" style="display:none">Start timer</button>
      </div>

      <!-- Active -->
      <div id="activeRow" style="display:none">
        <div class="hr"></div>
        <div class="muted">Active assignment</div>
        <div id="activeTitle" class="big"></div>
        <div id="activeTime" class="timer"></div>
        <div class="row">
          <button id="submit">Mark done</button>
        </div>
      </div>

      <div id="status" class="muted" style="margin-top:8px"></div>
    </div>
  </div>

  <script type="module" src="./app.js"></script>
</body>
</html>
